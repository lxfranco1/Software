#:include firebaseloginscreen.kv
#:import FirebaseLoginScreen firebaseloginscreen.FirebaseLoginScreen
#:import utils kivy.utils


BoxLayout:
    orientation:'vertical'



    ScreenManager:
        id: screen_manager

        FirebaseLoginScreen:
            canvas.before:
                Rectangle:
                    size: self.size
                    #pos: self.pos
                    source: "assets/pure_lust.jpg"

            id: firebase_login_screen
            name: "firebase_login_screen"
            web_api_key: "AIzaSyAhOVY1khHv6nLk5g9tmcMt6X5eIQZpk1I" # Found in Firebase -> Project Settings -> Web API Key
            primary_color: utils.get_color_from_hex("#EE682A")
            secondary_color: utils.get_color_from_hex("#060809")
            tertiary_color: (.25, .25, .25, 1)
            on_login_success:
                # Defining this function lets you program what to do when the
                # user has logged in (probably you'll want to change screens)!
                # Get the important user info
                app.user_localId = self.localId
                app.user_idToken = self.idToken
                screen_manager.current= "main"

#        Screen:
#            name: "login"
#            BoxLayout:
#                orientation:'vertical'
#                canvas:
#                    Rectangle:
#                        #pos: self.pos
#                        size: self.size
#                        source: "assets/pure_lust.jpg"
#                AnchorLayout:
#                    anchor_x: 'center'
#                    anchor_y: 'top'
#                    MDToolbar:
#                        pos: 0, root.height - 60
#                        id: toolbar
#                        title: 'Login Page'
#                        md_bg_color: app.theme_cls.primary_dark
#                MDRoundFlatButton:
#                    text: "Go to Main Page"
#                   icon: 'plus'
#                    on_release:
#                       screen_manager.current = 'main'

        Screen:
            name: "main"

            MDBottomNavigation:
                id: navBar
                title: 'Party App'
                md_bg_color: app.theme_cls.primary_color
                left_action_items: [['menu', lambda x: '']]

                MDBottomNavigationItem:
                    name: 'main'
                    text: 'Home'
                    icon: 'web'
                    canvas:
                        Rectangle:
                            #pos: self.pos
                            size: self.size
                            source: "assets/pure_lust.jpg"

                    ScrollView:
                        BoxLayout:

                            orientation: 'vertical'
                            size_hint_y: None
                            height: self.minimum_height
                            spacing: dp(10)
                            pos_hint: {'center_x': .5, 'center_y': .5}

                            MDRoundFlatButton:
                                text: "Press to logout?"
                                icon: 'plus'
                                on_release:
                                    print(firebase_login_screen.refresh_token_file)



                MDBottomNavigationItem:
                    name: 'main2'
                    text: 'Trending'
                    icon: 'fire'
                    canvas:
                        Rectangle:
                            #pos: self.pos
                            size: self.size
                            source: "assets/pure_lust.jpg"

                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        pos_hint: {'center_x': .5, 'center_y': .5}


                MDBottomNavigationItem:
                    name: 'main3'
                    text: 'Nearby'
                    icon: 'near-me'
                    canvas:
                        Rectangle:
                            #pos: self.pos
                            size: self.size
                            source: "assets/pure_lust.jpg"

                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        pos_hint: {'center_x': .5, 'center_y': .5}

                MDBottomNavigationItem:
                    name: 'main4'
                    text: 'Profile'
                    icon: 'account'
                    canvas:
                        Rectangle:
                            #pos: self.pos
                            size: self.size
                            source: "assets/pure_lust.jpg"

                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: self.minimum_height
                        spacing: dp(10)
                        pos_hint: {'center_x': .5, 'center_y': .5}